<% include includes/head.ejs %>
  <!-- DataTables -->

  <div class="wrapper">

    <!-- Preloader -->
    <!-- <div class="preloader flex-column justify-content-center align-items-center">
    <img class="animation__shake" src="../dist/img/AdminLTELogo.png" alt="AdminLTELogo" height="60" width="60">
  </div> -->

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light">
      <!-- Left navbar links -->
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#" role="button"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="index3.html" class="nav-link">Home</a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="#" class="nav-link">Contact</a>
        </li>
      </ul>

      <!-- Right navbar links -->
      <ul class="navbar-nav ml-auto">
        <!-- Navbar Search -->
        <li class="nav-item">
          <a class="nav-link" data-widget="navbar-search" href="#" role="button">
            <i class="fas fa-search"></i>
          </a>
          <div class="navbar-search-block">
            <form class="form-inline">
              <div class="input-group input-group-sm">
                <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                <div class="input-group-append">
                  <button class="btn btn-navbar" type="submit">
                    <i class="fas fa-search"></i>
                  </button>
                  <button class="btn btn-navbar" type="button" data-widget="navbar-search">
                    <i class="fas fa-times"></i>
                  </button>
                </div>
              </div>
            </form>
          </div>
        </li>

        <!-- Messages Dropdown Menu -->
        <li class="nav-item dropdown">
          <a class="nav-link" data-toggle="dropdown" href="#">
            <i class="far fa-comments"></i>
            <span class="badge badge-danger navbar-badge">3</span>
          </a>
          <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
            <a href="#" class="dropdown-item">
              <!-- Message Start -->
              <div class="media">
                <img src="../dist/img/user1-128x128.jpg" alt="User Avatar" class="img-size-50 mr-3 img-circle">
                <div class="media-body">
                  <h3 class="dropdown-item-title">
                    Brad Diesel
                    <span class="float-right text-sm text-danger"><i class="fas fa-star"></i></span>
                  </h3>
                  <p class="text-sm">Call me whenever you can...</p>
                  <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                </div>
              </div>
              <!-- Message End -->
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <!-- Message Start -->
              <div class="media">
                <img src="../dist/img/user8-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                <div class="media-body">
                  <h3 class="dropdown-item-title">
                    John Pierce
                    <span class="float-right text-sm text-muted"><i class="fas fa-star"></i></span>
                  </h3>
                  <p class="text-sm">I got your message bro</p>
                  <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                </div>
              </div>
              <!-- Message End -->
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <!-- Message Start -->
              <div class="media">
                <img src="../dist/img/user3-128x128.jpg" alt="User Avatar" class="img-size-50 img-circle mr-3">
                <div class="media-body">
                  <h3 class="dropdown-item-title">
                    Nora Silvester
                    <span class="float-right text-sm text-warning"><i class="fas fa-star"></i></span>
                  </h3>
                  <p class="text-sm">The subject goes here</p>
                  <p class="text-sm text-muted"><i class="far fa-clock mr-1"></i> 4 Hours Ago</p>
                </div>
              </div>
              <!-- Message End -->
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item dropdown-footer">See All Messages</a>
          </div>
        </li>
        <!-- Notifications Dropdown Menu -->
        <li class="nav-item dropdown">
          <a class="nav-link" data-toggle="dropdown" href="#">
            <i class="far fa-bell"></i>
            <span class="badge badge-warning navbar-badge">15</span>
          </a>
          <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
            <span class="dropdown-item dropdown-header">15 Notifications</span>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <i class="fas fa-envelope mr-2"></i> 4 new messages
              <span class="float-right text-muted text-sm">3 mins</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <i class="fas fa-users mr-2"></i> 8 friend requests
              <span class="float-right text-muted text-sm">12 hours</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item">
              <i class="fas fa-file mr-2"></i> 3 new reports
              <span class="float-right text-muted text-sm">2 days</span>
            </a>
            <div class="dropdown-divider"></div>
            <a href="#" class="dropdown-item dropdown-footer">See All Notifications</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="fullscreen" href="#" role="button">
            <i class="fas fa-expand-arrows-alt"></i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-widget="control-sidebar" data-controlsidebar-slide="true" href="#" role="button">
            <i class="fas fa-th-large"></i>
          </a>
        </li>
      </ul>
    </nav>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->

    <%- include('includes/side.ejs', {user: user.role}); %>
      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
          <div class="container-fluid">
            <div class="row mb-2">
              <div class="col-sm-6">
                <h1>Nhân viên</h1>
              </div>
              <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#create-modal-xl">Thêm
                    mới</button>
                </ol>
              </div>
            </div>
          </div><!-- /.container-fluid -->
        </section>
        <!-- /.content-header -->
        <!-- Main content -->

        <section class="content">
          <div class="container-fluid">
            <div class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Danh sách nhân viên</h3>
                  </div>
                  <!-- /.card-header -->
                  <div class="card-body">
                    <table id="example1" class="table table-bordered table-striped">
                      <thead>
                        <tr>
                          <!-- <th>ID</th> -->
                          <th>Họ và tên nhân viên</th>
                          <th>Ngày bắt đầu làm việc</th>
                          <th>Giới tính</th>
                          <th>Số điện thoại</th>
                          <th>Email</th>
                          <th>Ngày sinh</th>
                          <th>CCCD/CMND</th>
                          <th>Tình trạng làm việc</th>
                        </tr>
                      </thead>
                      <tbody>
                        <% data.forEach(item=> { %>
                          <tr>
                            <td>
                              <%= item.employee_name %>
                            </td>
                            <td>
                              <%= item.start_date %>
                            </td>
                            <td>
                              <%= item.gender==true ? 'Nam' : 'Nữ' %>
                            </td>
                            <td>
                              <%= item.phone_number %>
                            </td>
                            <td>
                              <%= item.email_address %>
                            </td>
                            <td>
                              <%= item.dob %>
                            </td>
                            <td><img src="<%= item.cccd_image %>" style="width: 150px;" data-toggle="modal"
                                data-target="#view-image-<%= item._id %>" /></td>
                            <td>
                              <%= item.employment_status_id.Employment_Status_Name%>
                            </td>
                            <td class="project-actions text-right">
                              <a class="btn btn-info btn-sm" data-toggle="modal"
                                data-target="#edit-modal-xl-<%= item._id %>" onclick="setIdImage('<%= item._id %>')">
                                <i class="fas fa-pencil-alt">
                                </i>
                                Sửa
                              </a>
                              <a class="btn btn-danger btn-sm" onclick="clickDelete('<%= item._id %>')">
                                <i class="fas fa-trash">
                                </i>
                                Xóa
                              </a>
                            </td>
                          </tr>
                          <div class="modal fade" id="edit-modal-xl-<%= item._id %>">
                            <div class="modal-dialog modal-lg">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h4 class="modal-title">Sửa thông tin User</h4>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">
                                  <!-- /.card-header -->
                                  <!-- form start -->
                                  <form>
                                    <div class="card-body">
                                      <div class="form-group">
                                        <label for="inputEmployeeNameEdit">Họ và tên nhân viên</label>
                                        <input type="text" class="form-control"
                                          id="inputEmployeeNameEdit-<%= item._id %>" value="<%= item.employee_name %>"">
                              </div>
                              <div class=" form-group">
                                        <label for="inputStartDateEdit">Ngày làm việc</label>
                                        <input type="date" class="form-control" data-date=""
                                          data-date-format="DD MMMM YYYY" id="inputStartDateEdit-<%= item._id %>"
                                          value="2015-08-09" placeholder="Ngày làm việc">
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Chức vụ</label>
                                          <select class="custom-select" id="selectPositionEdit-<%= item._id %>">
                                            <option value="true">Active</option>
                                            <option value="false">Disable</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Người quản lý</label>
                                          <select class="custom-select" id="selectManagerEdit-<%= item._id %>">
                                            <option value="true">Active</option>
                                            <option value="false">Disable</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Bộ phận</label>
                                          <select class="custom-select" id="selectDepartmentEdit-<%= item._id %>">
                                            <option value="true">Active</option>
                                            <option value="false">Disable</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Giới tính</label>
                                          <select class="custom-select" id="selectGenderEdit-<%= item._id %>">
                                            <option value="true">Nam</option>
                                            <option value="false">Nữ</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <label for="inputPhoneNumberEdit">Số điện thoại</label>
                                        <input type="number" class="form-control"
                                          id="inputPhoneNumberEdit-<%= item._id %>" placeholder="Số điện thoại">
                                      </div>
                                      <div class="form-group">
                                        <label for="inputEmailEdit">Email</label>
                                        <input type="email" class="form-control" id="inputEmailEdit-<%= item._id %>"
                                          placeholder="Email">
                                      </div>
                                      <div class="form-group">
                                        <label for="inputDOBEdit">Ngày sinh</label>
                                        <input type="date" class="form-control" id="inputDOBEdit-<%= item._id %>"
                                          placeholder="Ngày sinh">
                                      </div>
                                      <div class="form-group">
                                        <label>Ảnh CCCD</label>
                                        <div class="input-group">
                                          <span class="input-group-btn">
                                            <span class="btn btn-default btn-file btn-file-edit-<%= item._id %>">
                                              Browse… <input type="file" id="imgInp-edit-<%= item._id %>">
                                            </span>
                                          </span>
                                          <input type="text" name="img" class="form-control" readonly>
                                        </div>
                                        <img id="img-upload-edit-<%= item._id %>" src="<%= item.cccd_image %>" style="width: 250px;" />
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Chi nhánh</label>
                                          <select class="custom-select" id="selectBranchEdit-<%= item._id %>">
                                            <option value="true">Active</option>
                                            <option value="false">Disable</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Lương cơ bản</label>
                                          <select class="custom-select" id="selectSalaryEdit-<%= item._id %>">
                                            <option value="true">Active</option>
                                            <option value="false">Disable</option>
                                          </select>
                                        </div>
                                      </div>
                                      <div class="form-group">
                                        <label for="inputEffectiveDateEdit">Ngày áp dụng</label>
                                        <input type="date" class="form-control"
                                          id="inputEffectiveDateEdit-<%= item._id %>" placeholder="Ngày áp dụng">
                                      </div>
                                      <div class="form-group">
                                        <label for="inputBankAccountEdit">Tài khoản nhận lương</label>
                                        <input type="number" class="form-control"
                                          id="inputBankAccountEdit-<%= item._id %>" placeholder="Tài khoản nhận lương">
                                      </div>
                                      <div class="form-group">
                                        <div class="form-group">
                                          <label>Tình trạng làm việc</label>
                                          <select class="custom-select" id="selectEmploymentStatusEdit-<%= item._id %>">
                                            <% dataEmploymentStatus.forEach(element=> { %>
                                              <option value="<%= element._id %>">
                                                <%= element.Employment_Status_Name %>
                                              </option>
                                              <%}) %>
                                          </select>
                                        </div>
                                      </div>
                                    </div>
                                    <!-- /.card-body -->
                                  </form>
                                </div>
                                <div class="modal-footer justify-content-between">
                                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                  <button type="button" class="btn btn-primary"
                                    onclick="clickEdit('<%= item._id %>')">Lưu</button>
                                </div>

                              </div>
                              <!-- /.modal-content -->
                            </div>
                            <!-- /.modal-dialog -->
                          </div>
                          <div class="modal fade" id="view-image-<%= item._id %>">
                            <div class="modal-dialog" role="document">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title">Căn cước công dân / chứng minh nhân dân</h5>
                                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="modal-body">


                                  <img class="someClass" src="<%= item.cccd_image %>" width="450" height="250">

                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                </div>
                              </div>
                            </div>
                          </div>
                          <% }) %>
                      </tbody>

                    </table>
                  </div>
                  <!-- /.card-body -->
                </div>
                <!-- /.card -->
              </div>
              <!-- /.col -->
            </div>
            <!-- /.row -->
          </div>
          <!-- /.container-fluid -->
        </section>
        <div class="modal fade" id="create-modal-xl">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header">
                <h4 class="modal-title">Tạo mới nhân viên</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <!-- /.card-header -->
                <!-- form start -->
                <form>
                  <div class="card-body">
                    <div class="form-group">
                      <label for="inputEmployeeName">Họ và tên nhân viên</label>
                      <input type="text" class="form-control" id="inputEmployeeName" placeholder="Họ và tên nhân viên">
                    </div>
                    <div class="form-group">
                      <label for="inputStartDate">Ngày làm việc</label>
                      <input type="date" class="form-control" id="inputStartDate" data-date=""
                        data-date-format="DD MMMM YYYY" placeholder="Ngày làm việc">
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Chức vụ</label>
                        <select class="custom-select" id="selectPosition">
                          <option value="true">Active</option>
                          <option value="false">Disable</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Người quản lý</label>
                        <select class="custom-select" id="selectManager">
                          <option value="true">Active</option>
                          <option value="false">Disable</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Bộ phận</label>
                        <select class="custom-select" id="selectDepartment">
                          <option value="true">Active</option>
                          <option value="false">Disable</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Giới tính</label>
                        <select class="custom-select" id="selectGender">
                          <option value="true">Nam</option>
                          <option value="false">Nữ</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="inputPhoneNumber">Số điện thoại</label>
                      <input type="number" class="form-control" id="inputPhoneNumber" placeholder="Số điện thoại">
                    </div>
                    <div class="form-group">
                      <label for="inputEmail">Email</label>
                      <input type="email" class="form-control" id="inputEmail" placeholder="Email">
                    </div>
                    <div class="form-group">
                      <label for="inputDOB">Ngày sinh</label>
                      <input type="date" class="form-control" id="inputDOB" placeholder="Ngày sinh">
                    </div>
                    <div class="form-group">
                      <label>Ảnh CCCD</label>
                      <div class="input-group">
                        <span class="input-group-btn">
                          <span class="btn btn-default btn-file">
                            Browse… <input type="file" id="imgInp">
                          </span>
                        </span>
                        <input type="text" name="img" class="form-control" readonly>
                      </div>
                      <img id='img-upload' style="width: 250px;" />
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Chi nhánh</label>
                        <select class="custom-select" id="selectBranch">
                          <option value="true">Active</option>
                          <option value="false">Disable</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Lương cơ bản</label>
                        <select class="custom-select" id="selectSalary">
                          <option value="true">Active</option>
                          <option value="false">Disable</option>
                        </select>
                      </div>
                    </div>
                    <div class="form-group">
                      <label for="inputEffectiveDate">Ngày áp dụng</label>
                      <input type="date" class="form-control" id="inputEffectiveDate" placeholder="Ngày áp dụng">
                    </div>
                    <div class="form-group">
                      <label for="inputBankAccount">Tài khoản nhận lương</label>
                      <input type="number" class="form-control" id="inputBankAccount"
                        placeholder="Tài khoản nhận lương">
                    </div>
                    <div class="form-group">
                      <div class="form-group">
                        <label>Tình trạng làm việc</label>
                        <select class="custom-select" id="selectEmploymentStatus">
                          <% dataEmploymentStatus.forEach(element=> { %>
                            <option value="<%= element._id %>">
                              <%= element.Employment_Status_Name %>
                            </option>
                            <%}) %>
                        </select>
                      </div>
                    </div>
                  </div>
                  <!-- /.card-body -->
                </form>
              </div>
              <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="onClick()">Lưu</button>
              </div>
            </div>
            <!-- /.modal-content -->
          </div>
          <!-- /.modal-dialog -->
        </div>
        <!-- /.content -->

      </div>

      <% include includes/foot.ejs %>
        <!-- DataTables  & Plugins -->
        <script src="../plugins/datatables/jquery.dataTables.min.js"></script>
        <script src="../plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
        <script src="../plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
        <script src="../plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
        <script src="../plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
        <script src="../plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
        <script src="../plugins/jszip/jszip.min.js"></script>
        <script src="../plugins/pdfmake/pdfmake.min.js"></script>
        <script src="../plugins/pdfmake/vfs_fonts.js"></script>
        <script src="../plugins/datatables-buttons/js/buttons.html5.min.js"></script>
        <script src="../plugins/datatables-buttons/js/buttons.print.min.js"></script>
        <script src="../plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.2/axios.min.js"></script>
        <script src="../../plugins/toastr/toastr.min.js"></script>
        <script>
          $(function () {
            $('#example1').DataTable({
              "paging": true,
              "lengthChange": false,
              "searching": true,
              "ordering": true,
              "info": true,
              "autoWidth": false,
              "responsive": true,
            });

            var Toast = Swal.mixin({
              toast: true,
              position: 'top-end',
              showConfirmButton: false,
              timer: 3000
            });
          });

          const onClick = () => {
            var employeeName = document.getElementById('inputEmployeeName').value
            var startDate = document.getElementById('inputStartDate').value
            var gender = document.getElementById('selectGender').value
            var phoneNumber = document.getElementById('inputPhoneNumber').value
            var email = document.getElementById('inputEmail').value
            var DOB = document.getElementById('inputDOB').value
            var effectiveDate = document.getElementById('inputEffectiveDate').value
            var bankAccount = document.getElementById('inputBankAccount').value
            var employmentStatus = document.getElementById('selectEmploymentStatus').value
            const image_cccd = document.getElementById('imgInp').files[0]
            var formData = new FormData()
            formData.append('image_cccd', image_cccd)
            formData.append('employeeName', employeeName)
            formData.append('startDate', startDate)
            formData.append('gender', gender)
            formData.append('phoneNumber', phoneNumber)
            formData.append('email', email)
            formData.append('DOB', DOB)
            formData.append('effectiveDate', effectiveDate)
            formData.append('bankAccount', bankAccount)
            formData.append('employmentStatus', employmentStatus)
            axios.post('/employee/create', formData, {
              headers: {
                'content-type': 'multipart/form-data' // do not forget this 
              }
            }).then(res => {
              $("[data-dismiss=modal]").trigger({ type: "click" });
              location.reload()
            }).catch(e => toastr.warning(e.response.data.message))
          }

          const clickDelete = (id) => {
            axios.post('/employee/delete', { id: id }).then(res => {
              $("[data-dismiss=modal]").trigger({ type: "click" });
              // location.reload()
            })
              .catch(err => console.log(err))
          }
          const setIdImage = (id) => {
            $(document).ready(function () {
            $(document).on('change', `.btn-file-edit-${id} :file`, function () {
              var input = $(this),
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
              input.trigger('fileselect', [label]);
            });

            $(`.btn-file-edit-${id} :file`).on('fileselect', function (event, label) {
              var input = $(this).parents('.input-group').find(':text'),
                log = label;
              if (input.length) {
                input.val(log);
              } else {
                if (log) alert(log);
              }

            });
            function readURL(input) {
              if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                  $(`#img-upload-edit-${id}`).attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
              }
            }

            $(`#imgInp-edit-${id}`).change(function () {
              readURL(this);
            });

          });
          }
          const clickEdit = (id) => {
            var employeeName = document.getElementById(`inputEmployeeNameEdit-${id}`).value
            var startDate = document.getElementById(`inputStartDateEdit-${id}`).value
            var gender = document.getElementById(`selectGenderEdit-${id}`).value
            var phoneNumber = document.getElementById(`inputPhoneNumberEdit-${id}`).value
            var email = document.getElementById(`inputEmailEdit-${id}`).value
            var DOB = document.getElementById(`inputDOBEdit-${id}`).value
            var effectiveDate = document.getElementById(`inputEffectiveDateEdit-${id}`).value
            var bankAccount = document.getElementById(`inputBankAccountEdit-${id}`).value
            var employmentStatus = document.getElementById(`selectEmploymentStatusEdit-${id}`).value
            const image_cccd = document.getElementById(`imgInp-edit-${id}`).files[0]
            var formData = new FormData()
            formData.append('image_cccd', image_cccd)
            formData.append('employeeName', employeeName)
            formData.append('startDate', startDate)
            formData.append('gender', gender)
            formData.append('phoneNumber', phoneNumber)
            formData.append('email', email)
            formData.append('DOB', DOB)
            formData.append('effectiveDate', effectiveDate)
            formData.append('bankAccount', bankAccount)
            formData.append('employmentStatus', employmentStatus)
            formData.append('id', id)
            axios.post('employee/edit', formData, {
              'content-type': 'multipart/form-data'
            }).then(req => {
              console.log(req)
              // $("[data-dismiss=modal]").trigger({ type: "click" });
              // location.reload()
            }).catch(e => console.log(e))
          }

          $(document).ready(function () {
            $(document).on('change', '.btn-file :file', function () {
              var input = $(this),
                label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
              input.trigger('fileselect', [label]);
            });

            $('.btn-file :file').on('fileselect', function (event, label) {

              var input = $(this).parents('.input-group').find(':text'),
                log = label;
              if (input.length) {
                input.val(log);
              } else {
                if (log) alert(log);
              }

            });
            
            
            function readURL(input) {
              if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function (e) {
                  $('#img-upload').attr('src', e.target.result);
                }

                reader.readAsDataURL(input.files[0]);
              }
            }

            $("#imgInp").change(function () {
              readURL(this);
            });

          });
          
        </script>
        </body>

        </html>